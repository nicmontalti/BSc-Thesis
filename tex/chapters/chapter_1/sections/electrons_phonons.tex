\section{Electrons and phonons in crystals} \label{sec:electrons_phonons}
In this section we briefly describe how free electrons and phonons behave in crystals, starting with a description of the crystal lattice. Initially, the electron-electron, phonon-phonon and electron-phonon interactions are not considered. Eventually, the electron-phonon interaction is discussed, as this represent the key interaction of the polaron quasiparticle.
\subsection{Crystal lattice} \label{sec:crystals}
Condensed matter physics has to deal with systems of many particles, typically electrons. We have already introduced a mathematical formalism that allows us to describe such systems. However, it is clearly impossible to solve the equations of a general N-body system. Luckily, X-ray diffraction experiments showed that many solids exhibit particular symmetry properties, useful to simplify the problem.

Many solids, called crystals, are composed by the repetition in space of an identical unit cell. The unit cell is defined as the smallest repeating unit having the full symmetry of the crystal structure. The Bravais lattice, also referred to as space lattice, describes the geometric arrangement of the unit cells. The unit cells are positioned on the lattice points belonging to the Bravais lattice. Given  two lattice points, positioned at $\vec{R}_1$ and $\vec{R}_2$, the difference between them is
\begin{equation}
    \vec{R}_1 - \vec{R}_2 = \vec{R}_n
\end{equation}
where $\vec{R}_n = n_1\vec{a}_1 + n_2\vec{a}_2 + n_3\vec{a}_3$. The three vectors $\vec{a}_1, \vec{a}_2, \vec{a}_3$ are called basis vectors and $n_1, n_2, n_3$ are integers. The position of a single atom in the crystal can then be expressed as the sum of its position in the unit cell $\vec{\tau}_a$ and the position of the lattice point $\vec{R}_n$ in the crystal
\begin{equation}
    \vec{R}_n^a = \vec{R}_n + \vec{\tau}_a
\end{equation}
Given the symmetry of the system, every property $f(\vec{r})$ of the lattice is invariant under a translation of a lattice vector $\vec{R}_n$
\begin{equation} \label{eq:translational_invariance}
    f(\vec{r}+\vec{R}_n) = f(\vec{r})
\end{equation}
We will see that applying this simple principle to the potential generated by the ions will have important implications on the description of electrons.

Associated to the Bravais lattice, there is a second lattice called reciprocal lattice. It is defined by three other basis vectors $\vec{b}_1, \vec{b}_2, \vec{b}_3$, with
\begin{equation} \label{eq:reciprocal_basis}
    \vec{b}_1 = \frac{2\pi}{\Omega} \ \vec{a}_2 \times \vec{a}_3
    \qquad
    \vec{b}_2 = \frac{2\pi}{\Omega} \ \vec{a}_3 \times \vec{a}_1
    \qquad
    \vec{b}_3 = \frac{2\pi}{\Omega} \ \vec{a}_1 \times \vec{a}_2
\end{equation}
where $\Omega = \left| \vec{a}_1 \cdot \vec{a}_2 \cross \vec{a}_3 \right|$ is the volume of the unit cell. A vector in the reciprocal lattice is usually written as $\vec{G}_m = m_1\vec{a}_1 + m_2\vec{b}_2 + m_3\vec{b}_3$, where $m_1, m_2, m_3$ are integers. From \cref{eq:reciprocal_basis} it is easy to see that the product of a basis Bravais lattice vector $\vec{a}_i$ and a basis reciprocal lattice vector $\vec{b}_j$ is
\begin{equation}
    \vec{a}_i \cdot \vec{b}_j = 2\pi \delta_{ij}
\end{equation}

\subsection{Electrons in crystals} \label{sec:electrons}
The simplest quantum-mechanical model for electrons is the Sommerfield model. It was developed by Arnold Sommerfeld in 1928 \cite{sommerfeldZurElektronentheorieMetalle1928}, combining the Drude model \cite{drude1900a} with Fermi-Dirac statistics. The electrons are treated as quantum non-interacting free particles, which implies that the wavefunctions are plane waves
\begin{equation} \label{eq:plane_wave}
    \psi_\vec{k} = e^{i\vec{k}\cdot\vec{r}}
\end{equation}
The energy is entirely kinetic, and the dispersion relation is
\begin{equation} \label{eq:free_dispersion}
    \epsilon_\vec{k} = \frac{\hslash \vec{k}^2}{2m}
\end{equation}

Despite its simplicity, this model is surprisingly good at describing a vast number of physical phenomena. Examples are the Wiedemannâ€“Franz law, electrons heat capacity and electrical conductivity. However, it does not give any explanation for the different properties of conductors, insulators and semiconductors. To correctly describe the properties of electrons, we have to take into account the potential generated by the ions in the crystal. The interaction is entirely electrical, so the potential is the well-known Coulomb potential
\begin{equation}
    V_{e-N} = \sum_{i=1}^{N_e} \sum_{j=1}^{N_N} \frac{1}{4\pi\epsilon_0} \frac{-Z_je^2}{|\vec{r}_i - \vec{R}_j|}
\end{equation}
where the first sum is taken over the electrons and the second over the nuclei. It is convenient to divide the electrons in inner core electrons and valence electrons. The formers are tightly bound to the nucleus and occupy closed inner shells. They do not interact with the other atoms of the crystal, so the nucleus together with its core electrons can be treated as a positive ion. The valence electrons, belonging to  non-closed shells, form chemical bonds with other atoms. Despite this description of electrons being apparently simpler, the interaction between valence electrons and ions cannot be described by a simple Coulomb potential between the electrons and the nucleus $V_{e-N}$. The new potential $V_{e-I}$, used to describe the interaction between the valence electrons and the ion, has to take into account the core electrons as well.

The potential $V_{e-I}$ has not a simple known form. To overcome the complexity of solving a many-body \sche   with a long range electromagnetic interaction, we exploit the symmetry of the crystal. Recalling our previous discussion, we know that the potential of the ions is translationally invariant:
\begin{equation}
    V_{e-I}(\vec{r}+\vec{R}_n) = V_{e-I}(\vec{r})
\end{equation}
where $\vec{r}$ is the position of the electron and $\vec{R}_n$ is a Bravais lattice vector.
The \sche for the periodic potential $V_{e-I}$ is then
\begin{equation}
    \oper{H}_\text{Bloch} \Psi = \left(-\frac{\hslash^2}{2m} \laplacian + V_{e-I} \right)\Psi = \epsilon\Psi
\end{equation}
Bloch proved in 1929 that this problem is solved by the so-called Bloch functions
\begin{equation}
    \label{eq:bloch}
    \oper{H}_\text{Bloch} \Psi_{n\vec{k}} = \epsilon_n(\vec{k}) \Psi_{n\vec{k}}
    \quad
    \rightarrow
    \quad
    \Psi_{n\vec{k}}(\vec{r}) = u_{n\vec{k}}(\vec{r}) e^{i\vec{k}\cdot\vec{r}}
\end{equation}
where $u(\vec{r})$ is a function with the same periodicity of $V_{e-I}$, $\vec{k}$ is a wavevector and $n$ is the band index \cite{bloch1929}. The plane wave solution showed in \cref{eq:plane_wave} is a simple case of \cref{eq:bloch}, where $V_{e-I}(\vec{r}) = 0$ and $u(\vec{r}) = 1$. An important consequence of the Bloch theorem is that the solutions to the \sche, even if they are not plane waves, can still be indexed with the quantum number $\vec{k}$, along with the band index $n$.

Expanding $\epsilon_n(\vec{k})$ around $\vec{k} = 0$, for an isotropic energy band,
\begin{equation} \label{eq:effective_mass}
    \epsilon_n(\vec{k}) = \epsilon_n(\vec{0}) + \frac{\hslash k^2}{2m^*} + \mathcal{O}(k^3)
\end{equation}
where $m^*$ is the effective mass, defined as
\begin{equation}
    \frac{1}{m^*} = \frac{1}{\hslash^2} \pdv[2]{\epsilon}{k}
\end{equation}
Expression \labelcref{eq:effective_mass} is formally identical to \cref{eq:free_dispersion} with $m^*$ in place of $m$. For small values of $k$, electrons can then be treated as particles of mass $m^*$.

We can now define a creation and an annihilation operator $\adjop{c}_{n\vec{k}}, \oper{c}_{n\vec{k}}$ as operators that create and annihilate an electron in the state $(\vec{k},n)$. Using \cref{eq:bloch,eq:creation_annihilation_operator}, the final non-interacting electron Hamiltonian can be rewritten in second quantization as
\begin{equation}\label{eq:electron_hamiltonian}
    \oper{H}_\text{el} = \sum_{n\vec{k}} \epsilon_{n\vec{k}} \adjop{c}_{n\vec{k}}\oper{c}_{n\vec{k}}
\end{equation}

\subsection{Tight binding model} \label{sec:tight-binding}
The simplest models that describe electrons taking into account the potential of the lattice are the \emph{nearly-free electrons model} and the \emph{tight-binding model}. These two models approach the problem from an almost opposite point of view. If in the \emph{nearly-free electrons model} electrons are treated as free particles perturbed by the ionic potential, in the \emph{tight-binding model} electrons are treated as tightly bounded to the atoms. We are interested in exploring the latter, since it is used to describe electrons in the Holstein Hamiltonian.

Since the electrons are tightly bounded to the atoms, we suppose their wavefunction to be a linear combination of the atomic orbitals. The atomic orbitals $\phi_{ta}$ are functions that satisfy the equation
\begin{equation}
    \left(\frac{\vec{p}^2}{2m} + V_a(\vec{r}) \right) \phi_{ta} = E_{ta}\phi_{ta}
\end{equation}
where $V_a$ is the potential generated by an ion of type $a$ and $t$ labels the different atomic states. We form a linear combination of the atomic orbitals which will be used as a basis to expand the electron wavefunction
\begin{equation} \label{eq:lcao_tight}
    \phi_\vec{k}^{ta}(\vec{r}) = \frac{1}{\sqrt[]{N}}\sum_{n} e^{i\vec{k}\cdot\vec{R}_n}\phi_{ta}(\vec{r}-\vec{R}_n - \vec{\tau}_a)
\end{equation}
where $N$ is the number of unit cells. The factor $e^{i\vec{k}\cdot\vec{R}_n}$ ensures that $\psi$ is of the Bloch form.

In the tight-binding approximation, an electron wavefunction is expressed as a linear combination of the atomic orbitals in \cref{eq:lcao_tight}:
\begin{equation} \label{eq:lcao}
    \psi_\vec{k}(\vec{r}) = \sum_{ta} c_{ta}(\vec{k}) \phi_\vec{k}^{ta}(\vec{r})
\end{equation}
We could now solve the \sche, but we follow a different approach that is useful for the description of Holstein polarons. We want to express and solve the tight-binding electron Hamiltonian in a second-quantized form.

We start by analysing a system of free electrons. Using \cref{eq:electron_hamiltonian}, we can write the Hamiltonian as
\begin{equation}
    \oper{H}_\text{free} = \sum_{\vec{k}} \epsilon_{\vec{k}} \adjop{c}_{\vec{k}}\oper{c}_{\vec{k}}
\end{equation}
where the sum is taken over the extended Brillouin zone, and
\begin{equation} \label{eq:tight_free_disperion}
    \epsilon_{\vec{k}} = \frac{\hslash\vec{k}^2}{2m}
\end{equation}
The creation and annihilation operators in the momentum space are related to the respective creation and annihilation operators in the position space by a Fourier transformation
\begin{align} \label{eq:fourier_creation}
    \adjop{c}_\vec{k} & = \frac{1}{\sqrt{N}} \sum_j e^{i\vec{k}\cdot\vec{R}_j} \adjop{c}_j \\ \label{eq:fourier_annihilation}
    \oper{c}_\vec{k}  & = \frac{1}{\sqrt{N}} \sum_j e^{-i\vec{k}\cdot\vec{R}_j} \oper{c}_j
\end{align}
Using \cref{eq:fourier_creation,eq:fourier_annihilation} we can write the Hamiltonian in the position space as
\begin{equation} \label{eq:tight_free_hamiltonian_position}
    \oper{H}_\text{free} = \frac{1}{N} \sum_{ij} \sum_\vec{k} \epsilon_{\vec{k}} e^{i\vec{k}\cdot(\vec{R}_i - \vec{R}_j)} \adjop{c}_i\oper{c_j}
\end{equation}
where $N$ is the number of available $\vec{k}$ states. It is easy to interpret the effect of the creation and annihilation operators in \cref{eq:tight_free_hamiltonian_position}: an electron moves from $\vec{R}_j$ to $\vec{R}_i$ and
\begin{equation}
    \tilde{t}_{ij} = \sum_\vec{k} \epsilon_{\vec{k}} e^{i\vec{k}\cdot(\vec{R}_i - \vec{R}_j)}
\end{equation}
is the associated energy.

If we consider a system of non-interacting electrons moving in a Bravais lattice, subject to a periodic ionic potential, the dispersion relation in \cref{eq:tight_free_disperion} will change. Thus, the factor $\tilde{t}_{ij}$ will change too. We will refer to the new factor $t_{ij}$ as the \emph{hopping parameter}. It can still be interpreted as the change in energy after an electron moves from the site $j$ to the site $i$. The result is that the electrons will tend to become more localized, since the value of $t_{ij}$ will be very small for large distances $|\vec{R}_i - \vec{R}_j|$. In the tight-binding approximation, we assume
\begin{equation}
    t_{ij} =
    \begin{cases}
        -t \qquad                                     & \text{for nearest neighbors} \\
        0                                      \qquad & \text{otherwise}
    \end{cases}
\end{equation}
The tight-binding Hamiltonian becomes
\begin{equation} \label{eq:tight_hamiltonian_position}
    \oper{H}_\text{tb} = -t \sum_{\langle i,j \rangle} (\adjop{c}_i\oper{c_j} +  \adjop{c}_j\oper{c_i})
\end{equation}
where ${\langle i,j \rangle}$ means that the sum is extended only over the $(i,j)$ that are nearest neighbours.

It is useful to express \cref{eq:tight_hamiltonian_position} in the momentum-space representation. In order to do so, we rewrite \cref{eq:tight_hamiltonian_position} as
\begin{equation}
    \oper{H}_\text{tb} = -t \sum_{\langle i,j \rangle} (\adjop{c}_i\oper{c_j} +  \adjop{c}_j\oper{c_i})
    = -\frac{t}{2} \sum_{i} \sum_\delta (\adjop{c}_i\oper{c}_{i+\delta} +  \adjop{c}_{i+\delta}\oper{c_i})
\end{equation}
where the sum over $\delta$ is taken over all the nearest neighbours of the site $i$ and the factor $1/2$ is inserted to avoid double counting. Using \cref{eq:fourier_creation,eq:fourier_annihilation}, we can express the Hamiltonian in the momentum-space representation:
\begin{multline}
    \oper{H}_\text{tb}
    = -\frac{t}{2} \frac{1}{N} \sum_{i} \sum_\delta \sum_{\vec{k}, \vec{k}'}
    (e^{-i\vec{k}\cdot\vec{R}_i} e^{i\vec{k}'\cdot(\vec{R}_i+\vec{R}_\delta)} \adjop{c}_\vec{k} \oper{c_{\vec{k}'}} +
    e^{i\vec{k}\cdot\vec{R}_i} e^{-i\vec{k}'\cdot(\vec{R}_i+\vec{R}_\delta)} \adjop{c}_\vec{k} \oper{c_{\vec{k}'}}) \\
    = -\frac{t}{2} \sum_{\vec{k},\delta} (e^{i\vec{k}\cdot\vec{R}_\delta}+e^{-i\vec{k}\cdot\vec{R}_\delta})  \adjop{c}_\vec{k} \oper{c_{\vec{k}}}
    = -t \sum_{\vec{k},\delta} \cos(\vec{k}\cdot\vec{R}_\delta) \adjop{c}_\vec{k} \oper{c_{\vec{k}}}
\end{multline}
which can be written as
\begin{equation} \label{eq:tight_hamiltonian_momentum}
    \oper{H}_\text{tb} = \sum_{\vec{k}} \epsilon_{\vec{k}}^\text{tb} \adjop{c}_{\vec{k}}\oper{c}_{\vec{k}}
\end{equation}
with
\begin{equation}
    \epsilon_\vec{k}^\text{tb} = -t \sum_{    \delta} \cos(\vec{k}\cdot\vec{R}_\delta)
\end{equation}

\subsection{Phonons} \label{sec:phonons}
So far, we have treated the crystal as a collection of electrons subject to the potential of the ions fixed in the lattice. However, the ions are not really fixed. The crystal is held together by the bonds between the atoms. If we write the potential of the bonding force between two ions $i$ and $j$ as $v_{I-I}(|\vec{R}_i - \vec{R}_j|)$, the total ionic potential is
\begin{equation} \label{eq:ion_ion_potential}
    V_{I-I}(\vec{R}_1, \vec{R}_2, \dots) = \frac{1}{2} \sum_{ij} v_{I-I}(|\vec{R}_i - \vec{R}_j|)
\end{equation}
where the sum is taken over all the ions, and we have implicitly assumed that the potential is dependent only on the distance between the ions. The positions of the ions in the lattice
%\begin{equation}
$
    \vec{R}_n^a = \vec{R}_n + \vec{\tau}_a
$
%\end{equation}
are now interpreted as the equilibrium positions of the potential in \cref{eq:ion_ion_potential}, whereas the actual positions are given by
\begin{equation} \label{eq:atom_position_perturbed}
    \vec{R}_n^a(t) = \vec{R}_n^a + \delta \vec{R}_n^a(t) = \vec{R}_n^a + \vec{\xi}_{n,a}(t)
\end{equation}
Expanding \labelcref{eq:ion_ion_potential} in a Taylor series up to the second order, we can treat the system in the harmonic approximation.
\begin{equation}
    V_{I-I}(\vec{R}_1, \vec{R}_2, \dots) \simeq \oh \sum_{\alpha \alpha'} \sum_{m m'} \frac{\partial^2 V_{I-I}}{\partial \xi_m^\alpha \partial \xi_{m'}^{\alpha'}} \xi_m^\alpha \xi_{m'}^{\alpha'}
\end{equation}
where $\alpha = (x,y,z)$ and $m = (n,a)$.
In this form, the Hamiltonian
\begin{equation} \label{eq:lattice_hamiltonian}
    H_{I-I}(\vec{R}_1, \vec{R}_2, \dots) = \sum_{na} \frac{(\vec{p}_n^a)^2}{2m_a} + V_{I-I}(\vec{R}_1, \vec{R}_2, \dots)
\end{equation}
is not separable. Making a canonical change of coordinate from the position space to the reciprocal space, we can decouple the Hamiltonian into a sum of non-interacting Hamiltonians
\begin{equation}
    H_{I-I} = \sum_\vec{q} H_\vec{q}
\end{equation}
where $\vec{q}$ is a vector in the reciprocal space. A detailed analysis shows that, for a crystal with $r$ atoms per unit cell in $d$ dimensions, the ionic Hamiltonian can be expressed as
\begin{equation} \label{eq:phonon_hamiltonian}
    \oper{H}_\text{ph} = \sum_{\lambda \vec{q}} \hslash \omega_{\lambda\vec{q}} \left( \adjop{b}_{\lambda \vec{q}} \oper{b}_{\lambda \vec{q}} + \frac{1}{2} \right)
\end{equation}
where $\vec{q}$ is a wavevector, $\lambda = (0,1,\dots rd)$ a branch index, $\omega_{\lambda \vec{q}}$ eigenfrquencies and $\adjop{b}$ and $\oper{b}$ creation and annihilation operators. Thus, the vibrational modes can be interpreted as a collection of bosonic quasi-particles of momentum $\vec{q}$ and frequency $\omega_{\lambda \vec{q}}$. We call these quasi-particles phonons.

The system has a non-zero energy ground state
\begin{equation}
    E_0 = \sum_{\lambda \vec{q}} \frac{1}{2} \hslash\omega_{\lambda\vec{q}}
\end{equation}
The relation between the displacement in the real space $\delta \vec{R}_n^a $ and the creation and annihilation operators in the momentum space is
\begin{equation} \label{eq:phonon_coordinates}
    \delta \vec{R}_n^a = \sum_{\vec{q}\lambda} A_{\vec{q}\lambda}^a \vers{\epsilon}_{\vec{q}\lambda}^a e^{i\vec{q} \cdot \vec{R}_n^a} (\oper{b}_{\vec{q}\lambda} + \adjop{b}_{-\vec{q}\lambda})
\end{equation}
where $\vers{\epsilon}_{\vec{q}\lambda}^a$ is the polarization vector and
\begin{equation} \label{eq:A_phonon_constant}
    A_{\vec{q}\lambda}^a = \sqrt{\frac{\hslash}{2M_aN\omega_{\vec{q}\lambda}}}
\end{equation}
where $M_a$ is mass of the $a^\text{th}$ atom and $N$ the number of atoms. The polarization vector $\vers{\epsilon}_{\vec{q}\lambda}^a$ is used to describe the direction of the displacement $\delta \vec{R}_n^a$ with respect to the direction of propagation $\vec{q}$. We have transversal phonons if $\vec{q} \cdot \vers{\epsilon}_{\vec{q}\lambda}^a = 0$ and longitudinal phonons if $\vec{q} \cross \vers{\epsilon}_{\vec{q}\lambda}^a = 0$

\subsection{Electron-phonon interaction} \label{sec:electrons_phonons_interaction}
Now that we have described electrons and phonons, we can investigate how they interact with each other \cite{cohenFundamentalsCondensedMatter, tempere}. Their interaction is of vital importance in solid state physics, polarons included. Our discussion starts with a periodic potential
\begin{equation} \label{eq:general_electron_phonon_potential}
    V(\vec{r}, t) = \sum_{n,a} V_a(\vec{r} - \vec{R}_n^a(t))
\end{equation}
perturbed from its equilibrium position. $\vec{R}_n^a(t)$ is the position of the ions, and it is given by \cref{eq:atom_position_perturbed}:
\begin{equation}
    \vec{R}_n^a(t) = \vec{R}_n^a + \delta \vec{R}_n^a(t)
\end{equation}
For typical vibrations, it can be shown that the displacements $\xi = |\delta \vec{R}_n^a(t)|$ are much smaller than the atomic spacing $l$. In particular
\begin{equation}
    \frac{\xi}{l} \simeq \left[ \frac{m}{M} \right]^\frac{1}{4}
\end{equation}
and
\begin{equation}
    \frac{E_\text{ph}}{E_\text{el}} \simeq \left( \frac{m}{M} \right)^\oh
\end{equation}
where $E_\text{ph}$ and $E_\text{el}$ are respectively the phonon and electron energies, $m$ is the electron mass and $M$ the atomic mass. Given this scaling considerations, we can assume that the general band structure of the crystal remains the same. However, the interaction with the phonons can slightly modify it.

Using the assumption of small displacements, we can expand the potential in \cref{eq:general_electron_phonon_potential} in a Taylor series.
\begin{multline}
    V(\vec{r}, t) = \sum_{n,a} V_a(\vec{r} - \vec{R}_n^a - \delta \vec{R}_n^a(t))
    \simeq \sum_{n,a} \left[ V_a(\vec{r} - \vec{R}_n^a) + \delta \vec{R}_n^a(t) \cdot \grad_\vec{r} V_a(\vec{r} - \vec{R}_n^a) \right]
\end{multline}
Terms of higher orders take into account anharmonic oscillations, which were already neglected in the study of phonons. The term $V_a(\vec{r} - \vec{R}_n^a)$ does not depend on the deviation of the ions from their equilibrium positions. In fact, it is exactly the static periodic potential considered in the study of electrons in \cref{sec:electrons}.

The total Hamiltonian of the system can be written as the sum of three terms
\begin{equation}
    \oper{H} = \oper{H}_\text{el} + \oper{H}_\text{ph} + \oper{H}_\text{el-ph}
\end{equation}
where $\oper{H}_\text{el}$ and $\oper{H}_\text{ph}$ are respectively the electrons and phonons Hamiltonians, given by \cref{eq:electron_hamiltonian} and \cref{eq:phonon_hamiltonian}. The  term  $\oper{H}_\text{el-ph}$ describes the  electron-phonon interaction contribution, and it can be identified with
\begin{equation}
    \oper{H}_\text{el-ph} = \sum_{n,a} \delta \vec{R}_n^a(t) \cdot \grad_\vec{r} V_a(\vec{r} - \vec{R}_n^a)
\end{equation}
We can use \cref{eq:phonon_coordinates} to express the displacements in phonon coordinates
\begin{equation} \label{eq:first_electron_phonon_hamiltonian}
    \oper{H}_\text{el-ph} = \sum_{a} \sum_{\vec{q}\lambda} A_{\vec{q}\lambda}^a \vers{\epsilon}_{\vec{q}\lambda}^a \cdot \left( \sum_n e^{i\vec{q} \cdot \vec{R}_n^a}   \cdot \grad_\vec{r} V_a(\vec{r} - \vec{R}_n^a) \right) (\oper{b}_{\vec{q}\lambda} + \adjop{b}_{-\vec{q}\lambda})
\end{equation}
where $A_{\vec{q}\lambda}^a$ is given by \cref{eq:A_phonon_constant}, $\vers{\epsilon}_{\vec{q}\lambda}^a$ is the polarization vector, $\vec{q}$ is the momentum of the phonon and $\adjop{b}_{-\vec{q}\lambda}$ and $\oper{b}_{\vec{q}\lambda}$ are the phonon creation and annihilation operators.

The electron part of the previous expression is still written in the language of first quantization. Using \cref{eq:second_quantization}, we can express it in a second-quantized form. Suppressing the band indices and using the extended zone scheme, so that $\vec{k}'$ and $\vec{k}$ are not limited to the first Brillouin zone,
\begin{equation} \label{eq:general_electron_phonon_hamiltonian}
    \oper{H}_\text{el-ph} = \sum_{\vec{k}'\vec{k}} \bra{\vec{k}'} \oper{H}_\text{el-ph} \ket{\vec{k}} \adjop{c}_{\vec{k}'}\oper{c}_{\vec{k}}
    = \sum_{\vec{k}'\vec{k}} \sum_{\vec{q}\lambda} M_{\vec{k} \rightarrow \vec{k}'}^\lambda(\vec{q}) \adjop{c}_{\vec{k}'}\oper{c}_{\vec{k}} (\oper{b}_{\vec{q}\lambda} + \adjop{b}_{-\vec{q}\lambda})
\end{equation}
where the electron-phonon matrix $M$ can be derived from \cref{eq:first_electron_phonon_hamiltonian}. The previous expression can be interpreted as the transition of an electron from the state $\ket{\vec{k}}$ to the state $\ket{\vec{k}'}$ with either the creation of a phonon of momentum $-\vec{q}$ or the annihilation of a phonon of momentum $\vec{q}$. The matrix element $M_{\vec{k} \rightarrow \vec{k}'}^\lambda(\vec{q})$ gives the mechanical amplitude of such a process.

In order to evaluate $M$, we need to compute $\bra{\vec{k}'} \oper{H}_\text{el-ph} \ket{\vec{k}}$. We start with a Fourier transform of the potential
\begin{equation}
    V(\vec{r}) = \sum_\vec{q} V_a(\vec{q})e^{i\vec{q}\cdot\vec{r}}
\end{equation}
where $V_a(\vec{q})$ is the atomic form factor, and it is is given by
\begin{equation}
    V_a(\vec{q}) = \frac{1}{\Omega_a} \int e^{-i\vec{q
            }\cdot \vec{r}} V_a(\vec{r}) \differential \vec{r} = \frac{wN}{\Omega} \int e^{-i\vec{q
            }\cdot \vec{r}} V_a(\vec{r}) \differential \vec{r}
\end{equation}
where $\Omega_a$ is the volume of a unit cell, $\Omega$ the volume of the crystal, $N$ the number of unit cells and $w$ the number of atoms per unit cell. We compute the gradient of the potential $\grad_\vec{r} V_a(\vec{r})$ expressed as a Fourier series, and we evaluate it at $\vec{r}-\vec{R}_n^a$:
\begin{equation}\label{eq:gradient_fourier}
    \grad_\vec{r} V_a(\vec{r} - \vec{R}_n^a) = \frac{i}{wN} \sum_{\vec{q}'} \vec{q}' e^{i\vec{q}'\cdot \vec{r}} V_a(\vec{r}) e^{-i\vec{q}'\cdot \vec{R}_n^a}
\end{equation}
\Cref{eq:first_electron_phonon_hamiltonian} can now be rewritten using \cref{eq:gradient_fourier} as
\begin{equation}
    \oper{H}_\text{el-ph} = \frac{i}{wN} \sum_{la\lambda} \sum_{\vec{q}\vec{q}'} A_{\vec{q}\lambda}^a \vers{\epsilon}_{\vec{q}\lambda}^a \cdot \vec{q}' e^{i\vec{q}'\cdot \vec{r}} e^{i(\vec{q}-\vec{q}') \cdot \vec{R}_n^a} V_a(\vec{q}'   )  (\oper{b}_{\vec{q}\lambda} + \adjop{b}_{-\vec{q}\lambda})
\end{equation}
We know that
\begin{equation}
    \sum_n e^{i(\vec{q}-\vec{q}') \cdot \vec{R}_n^a} = N \delta(\vec{q} - \vec{q}' + \vec{G})
\end{equation}
where $\vec{G}$ is a vector of the reciprocal lattice. Then, most of the terms of the previous expression are zero, and we obtain
\begin{multline}
    \bra{\vec{k}'}\oper{H}_\text{el-ph}\ket{\vec{k}}
    \\ = \frac{i}{w} \sum_{a\lambda\vec{q}} A_{\vec{q}\lambda}^a \sum_{\vec{G}}  e^{-i \vec{G} \cdot \vec{\tau}_a} V_a(\vec{q} + \vec{G}   ) \vers{\epsilon}_{\vec{q}\lambda}^a \cdot (\vec{q}+\vec{G}) (\oper{b}_{\vec{q}\lambda} + \adjop{b}_{-\vec{q}\lambda}) \bra{\vec{k}'} e^{i(\vec{q} + \vec{G})\cdot \vec{r}} \ket{\vec{k}}
\end{multline}
where we have used that $\vec{G} \cdot \vec{R}_n = 2\pi n$, with $n$ integer, to simplify the sum over $l$. Finally, inserting this result in \cref{eq:general_electron_phonon_hamiltonian}, we obtain an expression for the matrix element
\begin{equation}
    M_{\vec{k} \rightarrow \vec{k}'}^\lambda(\vec{q}) =  \frac{i}{w} \sum_{a\vec{G}} \sqrt{\frac{\hslash}{2M_aN\omega_{\vec{q}\lambda}}}  e^{-i \vec{G} \cdot \vec{\tau}_a} V_a(\vec{q} + \vec{G}) \vers{\epsilon}_{\vec{q}\lambda}^a \cdot (\vec{q}+\vec{G}) \bra{\vec{k}'} e^{i(\vec{q} + \vec{G})\cdot \vec{r}} \ket{\vec{k}}
\end{equation}

We can compute the matrix element for a simple case where the initial and final state of the electron are plane waves. In this case,
\begin{equation} \label{eq:plane_waves}
    \bra{\vec{k}'} e^{i(\vec{q} + \vec{G})\cdot \vec{r}} \ket{\vec{k}} = \delta_{\vec{k}', \vec{k}+\vec{q}+\vec{G}}
\end{equation}
and
\begin{equation}
    M_{\vec{k} \rightarrow \vec{k}'}^\lambda(\vec{q}) =  \frac{i}{w} \sum_{a\vec{G}} \sqrt{\frac{\hslash}{2M_aN\omega_{\vec{q}\lambda}}}  e^{-i \vec{G} \cdot \vec{\tau}_a} V_a(\vec{q} + \vec{G}) \vers{\epsilon}_{\vec{q}\lambda}^a \cdot (\vec{q}+\vec{G}) \delta_{\vec{k}', \vec{k}+\vec{q}+\vec{G}}
\end{equation}
The scattering process that we have explained earlier is now more clear. An electron of momentum $\hslash\vec{k}$ is scattered in an electron of momentum $\hslash (\vec{k}+\vec{q}+\vec{G})$ by the emission of a phonon of momentum $-\vec{q}$ or the absorption of a phonon of momentum $\vec{q}$. We can identify two processes: the normal process, where $\vec{G} = 0$, and the umklapp process, where $\vec{G} \neq 0$. In the normal process $\vec{k}' = \vec{k} + \vec{q}$, and assuming $w=1$,
\begin{equation} \label{eq:phonon_matrix_normal}
    M_{\vec{k} \rightarrow \vec{k} + \vec{q}}^\lambda(\vec{q}) =  i \sqrt{\frac{\hslash}{2M_aN\omega_{\vec{q}\lambda}}}   V_a(\vec{q}) \vers{\epsilon}_{\vec{q}\lambda} \cdot \vec{q}
\end{equation}
It is clear that in this type of process, only longitudinal phonons contribute to the scattering, since for transversal phonons $\vers{\epsilon}_{\vec{q}\lambda} \cdot \vec{q} = 0$.

The electrons are affected by deformations of the lattice in several ways \cite{kittel1987}. The main effects of the coupling between  electrons and phonons are:
\begin{itemize}
    \item the scattering of electrons from a state $\vec{k}$ to a state $\vec{k}'$, resulting in electrical resistivity;
    \item the absorption or creation of phonons;
    \item the creation of an attractive force between electrons, which is essential to explain superconductivity.
\end{itemize}

Another consequence is that electrons, moving in the lattice, carry a lattice polarization field with them. The particle resulting from the combination of the electron and the polarization field is called \emph{polaron}, and it has a larger effective mass than the electron alone. In the next chapter, and in the rest of the thesis, we will focus on this last type of interaction.